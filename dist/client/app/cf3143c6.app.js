"use strict";var imgurApp=angular.module("joeyismImgurApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","angular-loading-bar","ngTouch"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","cfpLoadingBarProvider",function(a,b,c,d,e){b.otherwise("/"),e.includeSpinner=!1,c.html5Mode(!0),a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}),a.state("imgur-lite",{url:"/imgurlite",template:"<div joeyism-imgur-lite></div>"}),d.interceptors.push("authInterceptor")}]).factory("authInterceptor",["$rootScope","$q","$window",function(a,b,c){return{request:function(a){return a.headers=a.headers||{},a.headers.Authorization="Client-ID 31b48b2469457ee",c.sessionStorage.token&&(a.headers.Authorization="Bearer "+c.sessionStorage.token),a},response:function(a){return 401===a.status,a||b.when(a)}}}]).run(["$rootScope","$injector",function(a,b){b.get("$http").defaults.transformRequest=function(b,c){return a.oauth&&(c().Authorization="Bearer "+a.oauth.access_token),b?angular.toJson(b):void 0}}]);imgurApp.controller("MainCtrl",["$scope","$http",function(a,b){a.awesomeThings=[],b.get("/api/things").success(function(b){a.awesomeThings=b})}]),imgurApp.directive("autoLinker",["$compile","$timeout",function(a,b){var c;return{restrict:"EA",replace:!0,link:function(a,d){b(function(){var b=d[0].innerHTML,e=["http://","https://"];e.forEach(function(a){for(var e=0;e>=0;){b=d[0].innerHTML;var f=b.indexOf(a,e);if(0>f)break;var g=b.indexOf(" ",f),h="";0>g?g=b.length:h=b.substring(g,b.length);var i=b.substring(f,g);c=b.substring(0,f)+'<a href="'+i+'">'+i+"</a>"+h,d[0].innerHTML=c,e=(b.substring(0,f)+'<a href="'+i+'">'+i+"</a>").length-1}}),a.$apply()},1)}}}]),imgurApp.directive("imageonload",["cfpLoadingBar",function(a){return{restrict:"A",link:function(b,c){c.bind("load",function(){a.complete()})}}}]),imgurApp.directive("joeyismImgurLite",["imgurService","cfpLoadingBar","$timeout","$window","$location","$anchorScroll",function(a,b,c,d,e,f){return{templateUrl:"app/templates/joeyismImgur.html",replace:!0,link:function(d){b.start();var g,h=0,i=0;d.datas=[],window.mobilecheck=function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},d.mobile=window.mobilecheck();var j=function(){a.getGallery(i).then(function(b){d.datas=d.datas.concat(b.data.data),g=d.datas.length,d.datas.forEach(function(b){b.subtitle=[b.subtitle],b.description=[b.description],b.images_count?(b.link=[],b.subtitle=[],b.description=[],a.getAlbum(b.id).then(function(a){a.data.data.images.forEach(function(a){b.link.push(a.link),b.subtitle.push(a.title||""),b.description.push(a.description||"")})}),a.getComments("album/",b.id).then(function(a){b.comments=a.data.data})):(b.link=[b.link],a.getComments("image/",b.id).then(function(a){b.comments=a.data.data}))}),d.thisData=d.datas[h]})};j(),d.next=function(){b.start(),h++,h===g?(d.datas=[],h=0,i++,j()):d.thisData=d.datas[h],k()},d.prev=function(){i>=0&&h>=0&&(b.start(),h--,d.thisData=d.datas[h],c(function(){b.complete()},1)),k()},d.$on("my:keydown",function(a,b){39===b.keyCode?(d.swipeRight=!0,d.next(),c(function(){d.swipeRight=!1},100)):37===b.keyCode&&d.prev()});var k=function(){e.hash("top"),f()}}}}]),angular.module("joeyismImgurApp").config(function(){}),imgurApp.service("imgurService",["$http",function(a){function b(b){return a.get(e+b+".json")}function c(b){return a.get(f+b)}function d(b,c){return a.get("https://api.imgur.com/3/"+b+c+g)}var e="https://api.imgur.com/3/gallery/hot/viral/",f="https://api.imgur.com/3/album/",g="/comments/best";this.getGallery=function(a){return b(a)},this.getAlbum=function(a){return c(a)},this.getComments=function(a,b){return d(a,b)}}]),angular.module("joeyismImgurApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("joeyismImgurApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]),angular.module("joeyismImgurApp").run(["$templateCache",function(a){a.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div joeyism-imgur-app></div></div><footer class=footer><div class=container><p>Angular Fullstack v2.0.13 | <a href=https://twitter.com/tyhenkel>@tyhenkel</a> | <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Issues</a></p></div></footer>'),a.put("app/templates/joeyismImgur.html",'<div style="background: #121211"><div id=top></div><button ng-click=prev() class="button-float Fixed" style="left: 0px">&lt&lt</button><div class=jumbotron style="background: #2b2b2b; border-radius: 15px; padding: 4%; position:relative" ng-class="{\'jumbotron-mobile\':mobile, \'jumbotron-browser\': !mobile}"><div><div><a ng-href=http://imgur.com/gallery/{{thisData.id}} style="font-size: medium; font-color:" target=_blank><b>{{thisData.title}}</b></a></div><span style="color: #ddddd1">by</span> <a ng-href=http://imgur.com/user/{{thisData.account_url}} ng-if=thisData.account_url target=_blank>{{thisData.account_url}}</a> <span ng-if=!thisData.account_url style="color: #ddddd1">Anon</span></div><div ng-repeat="imageLink in thisData.link track by $index"><div class=subtitle auto-linker>{{thisData.subtitle[$index]}}</div><img class=imageLink ng-class="{swiperight: swipeRight}" ng-src={{imageLink}}?gifm imageonload><div ng-if="thisData.description[$index]!== null" class=description auto-linker>{{thisData.description[$index]}}</div></div><div style=margin-top:1%><progressbar animate=false value=thisData.ups/(thisData.ups+thisData.downs)*100 type=success style="background-color: #E44"><span><b style=color:black>{{thisData.score}} points</b></span></progressbar></div></div><div style="padding: 0% 5% 2% 5%; word-wrap: break-word" ng-repeat="comment in thisData.comments track by $index" ng-init="parentId = comment.id" ng-if="$index < 4"><div class=color-bone><div><a ng-href=http://imgur.com/user/{{comment.author}} style="padding-right: 20px" target=_blank>{{comment.author}}</a>{{comment.points}} points</div><div auto-linker>{{comment.comment}}</div><div ng-repeat="child in comment.children track by $index" style="padding-left: 25px" ng-if="child.parent_id === parentId && $index < 2">{{$innerIndex}}<div><div><a ng-href=http://imgur.com/user/{{child.author}} style="padding-right: 20px" target=_blank>{{child.author}}</a>{{child.points}} points</div><div auto-linker>{{child.comment}}</div></div></div></div></div><a style="padding: 0% 5% 2% 5%; word-wrap: break-word" ng-href=http://imgur.com/gallery/{{thisData.id}}#captions target=_blank>View more comments</a> <button ng-click=next() class="button-float Fixed" style="right: 0px">&gt&gt</button></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>joeyism-imgur</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')}]);